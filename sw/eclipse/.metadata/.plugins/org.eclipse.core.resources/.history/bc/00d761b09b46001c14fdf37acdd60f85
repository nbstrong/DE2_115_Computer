/*
 * main.cpp
 *
 *  Created on: Nov 15, 2021
 *      Author: MushinZero
 */

#include "system.h"
#include "altera_avalon_timer.h"
#include <stdint.h>
#include <stdio.h>

#define USERINPUT 0 // Whether to get user input or not
#define N 1 		// Number of repetitions for performance test
#define VECLENGTH 5 // Length of test vector array

#define INTERVAL_TIMER_BASE_PTR *(volatile uint32_t*)INTERVAL_TIMER_BASE

int euclids_sub(int a, int b);

unsigned int a_vec [VECLENGTH] = {
		91,
		1,
		1000000,
		2,
		2147483647
};
unsigned int b_vec [VECLENGTH] = {
		21,
		1,
		1,
		1023,
		524287
};

unsigned int n_vec [VECLENGTH] = {
		1,
		1,
		1,
		1,
		N
};

int main(void) {
    unsigned int a, b = 0;
    volatile unsigned int gcd_ci, gcd_sw = 0;

    for(int i = 0; i < VECLENGTH; i++) {
        // Got tired of inputting numbers, change #define at top
        if(USERINPUT && (i == 0)) {
        printf("\nInput A: ");
        scanf(" %u",&a);
        printf("\nInput B: ");
        scanf(" %u",&b);
        }
        else {
            a = a_vec[i];
            b = b_vec[i];
        }
        printf("\nA: %u", a);
        printf("\nB: %u", b);

        if (i != (VECLENGTH-1)){
        gcd_sw = euclids_sub(a, b);

        gcd_ci = ALT_CI_GCD_CI_0(a, b);

        printf("\nGCD_SW: %x", gcd_sw);
        printf("\nGCD_CI: %x", gcd_ci);
        }

        printf("\n");
    }

    printf("\nFin.");
    return 0;
}

int euclids_sub(int a, int b)
{
    if (a == b) {
        return a;}
    if (a > b) {
        return euclids_sub((a-b), b);}
    else {
        return euclids_sub(a, (b-a));}
}



